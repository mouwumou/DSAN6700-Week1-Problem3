# DSAN6700-Week1-Problem3
> This README file is generated by LLM.

## Introduction
This project provides a simple email alerting system using Python's SMTP libraries. It allows users to send custom email messages by executing the alert.py script, which utilizes the mailer.py utility to handle the email transmission.

**Key Features**

- Send emails using a local debugging SMTP server.
- Customizable sender, recipient, subject, and body of the message.
- Ideal for sending alerts in development workflows, such as CI/CD pipelines.

## How to use
### Prerequisites
Python >=3.9


### How to Run
1. **Clone the repository**: Ensure that you have the project directory (problem3/), which contains alert.py and mailer.py.

2. **Install the required libraries**: Open a terminal in the project directory and run the following command to install the required libraries (smtplib and email):

```{bash}
poetry install
```

3. **Start the local SMTP debugging server**: Open a terminal in VS Code and run the following command to start the SMTP debugging server. This server simulates email sending by printing messages to the console.

```{bash}
python -m smtpd -n -c DebuggingServer localhost:1025
```

Keep this terminal open as long as you are running the `alert.py` script.

4. **Send an email using alert.py**: Open a second terminal and run the following command to send an email alert:
You can use the package as module by running the following command:
```{bash}
python -m my_email.alert -s sender@example.com -r recipient@example.com -j "Test Alert" -b "This is a test email."
```

Or you can run the script directly by running the following command:
```{bash}
python alert.py -s sender@example.com -r recipient@example.com -j "Test Alert" -b "This is a test email."
```
- Replace sender@example.com and recipient@example.com with actual email addresses.
- Customize the subject (-j) and body (-b) of the email as needed.

You should see the email message printed in the first terminal running the SMTP server.

### Customizing and Extending Email Alerts
You can customize the email details like sender, recipient, subject, and body directly via command-line arguments.

```{bash}
python -m my_email.alert -s "admin@company.com" -r "user@company.com" -j "Alert Notification" -b "Build failed in stage 2."
```
This allows you to easily integrate email alerts into your workflow for various notifications, such as:

- Build success/failure notifications.
- Custom CI/CD alerts for different stages of the pipeline.

If you want to attach files to your emails or use a real SMTP server, you can modify the mailer.py script. For example, to use an external SMTP server like Gmail, update the SMTP configuration:
```{python}
s = SMTP("smtp.gmail.com", 587)
s.starttls()
s.login("your_email@gmail.com", "your_password")
```

## Project Structure
`alert.py`:
- **Purpose**: This script provides a command-line interface (CLI) for sending email alerts. It uses the ArgumentParser to parse command-line arguments for the sender, recipient, subject, and body.
- **Main Functionality**: It collects input parameters and calls the send_email() function from mailer.py.

`mailer.py`:
- **Purpose**: This script handles the email composition and sending using Python's smtplib and email libraries.
- **How It Works**:
    - Creates a MIMEMultipart email message.
    - Attaches the email body as plain text.
    - Connects to the local SMTP server on localhost:1025.
    - Sends the email (simulated in this case by the SMTP debug server).



## Reference
`alert.py`:
- **Command-line arguments**:
    - -s / --sender: (Required) The email address of the sender.
    - -r / --recipient: (Required) The email address of the recipient.
    - -j / --subject: (Optional) The subject of the email. Default is "Subject".
    - -b / --body: (Optional) The body of the email. Default is "Body".

`mailer.py`:
- Function `send_email(sender, recipient, subject, body)`:
    - **Parameters**:
        - sender: Email address of the sender.
        - recipient: Email address of the recipient.
        - subject: The subject of the email.
        - body: The body of the email (plain text).
    - **SMTP Configuration**:
        - Connects to the local SMTP server at localhost:1025.
        - Sends the email message to the recipient.